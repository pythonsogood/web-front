<nav class="navbar navbar-expand-lg">
	<div class="container-fluid">
		<a class="navbar-brand lexend-deca-regular" href="/">My blog</a>
		<div id="theme-switcher" class="ms-1 d-flex mt-1 align-items-center justify-content-center">
			<i class="fa fa-sun-o"></i>
			<div class="form-check form-switch p-2">
				<input id="theme-toggler" class="form-check-input m-0" type="checkbox" role="switch">
			</div>
			<i class="fa fa-moon-o"></i>
		</div>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav ms-auto my-2">
				<li class="nav-item">
					<a class="nav-link" href="/index.html">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/articles.html">Articles</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/about.html">About</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/contact.html">Contact</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/resources.html">Resources</a>
				</li>
			</ul>
		</div>
	</div>
</nav>
<script>
	for (const navbar of document.querySelectorAll("nav.navbar")) {
		for (const navlink of navbar.querySelectorAll(".nav-link")) {
			if (window.location.href == navlink.href || `${window.location.href}index.html` == navlink.href) {
				navlink.classList.add("active");
				navlink.ariaCurrent = "page";
			} else {
				if (navlink.classList.contains("active")) {
					navlink.classList.remove("active");
				}

				if (navlink.ariaCurrent == "page") {
					navlink.ariaCurrent = null;
				}
			}
		}
	}

	function getStoredTheme() {
		return localStorage.getItem("theme");
	}

	function setStoredTheme(theme) {
		localStorage.setItem("theme", theme);
	}

	function getPreferredTheme() {
		const storedTheme = getStoredTheme();
		if (storedTheme != null) {
			return storedTheme;
		}

		return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
	}

	function setTheme(theme) {
		if (theme == "auto") {
			theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
		}

		document.documentElement.setAttribute("data-bs-theme", theme);

		const themeSwitcher = document.querySelector("#theme-toggler");
		if (themeSwitcher != null) {
			themeSwitcher.checked = theme == "dark";
		}
	}

	window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
		const storedTheme = getStoredTheme();
		if (storedTheme !== "light" && storedTheme !== "dark") {
			setTheme(getPreferredTheme());
		}
	});

	const themeSwitcher = document.querySelector("#theme-toggler");

	if (themeSwitcher != null) {
		themeSwitcher.addEventListener("click", () => {
			const theme = themeSwitcher.checked ? "dark" : "light";
			setStoredTheme(theme);
			setTheme(theme);
		});
	}

	setTheme(getPreferredTheme());
</script>